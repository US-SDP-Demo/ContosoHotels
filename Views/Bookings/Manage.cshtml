@model ContosoHotels.Models.Booking
@{
    ViewData["Title"] = $"Manage Booking #{Model.BookingId}";
}

<div class="container mt-4">
    <div class="row">
        <div class="col-12">
            <!-- Header -->
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h2 class="text-primary">
                        <i class="fas fa-cogs me-2"></i>Manage Booking
                    </h2>
                    <p class="text-muted">Booking #@Model.BookingId for @Model.Customer.FirstName @Model.Customer.LastName</p>
                </div>
                <div>
                    <a asp-action="MyBookings" asp-route-email="@Model.Customer.Email" class="btn btn-outline-secondary">
                        <i class="fas fa-arrow-left me-2"></i>Back to My Bookings
                    </a>
                </div>
            </div>

            <!-- Success/Error Messages -->
            @if (TempData["SuccessMessage"] != null)
            {
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    <i class="fas fa-check-circle me-2"></i>@TempData["SuccessMessage"]
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            }
            
            @if (TempData["ErrorMessage"] != null)
            {
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    <i class="fas fa-exclamation-triangle me-2"></i>@TempData["ErrorMessage"]
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            }

            <div class="row">
                <!-- Booking Status Card -->
                <div class="col-md-12 mb-4">
                    <div class="card">
                        <div class="card-header bg-primary text-white">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-info-circle me-2"></i>Booking Status
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="row align-items-center">
                                <div class="col-md-8">
                                    @{
                                        var statusClass = Model.Status.ToString() switch
                                        {
                                            "Confirmed" => "bg-success",
                                            "Pending" => "bg-warning",
                                            "CheckedIn" => "bg-primary",
                                            "CheckedOut" => "bg-info",
                                            "Cancelled" => "bg-danger",
                                            _ => "bg-secondary"
                                        };
                                        
                                        var statusMessage = Model.Status.ToString() switch
                                        {
                                            "Confirmed" => "Your booking is confirmed and ready!",
                                            "Pending" => "Your booking is pending confirmation.",
                                            "CheckedIn" => "You are currently checked in. Enjoy your stay!",
                                            "CheckedOut" => "You have checked out. Thank you for staying with us!",
                                            "Cancelled" => "This booking has been cancelled.",
                                            _ => "Status unknown"
                                        };
                                    }
                                    
                                    <h4><span class="badge @statusClass fs-5">@Model.Status.ToString()</span></h4>
                                    <p class="mb-0">@statusMessage</p>
                                    
                                    @if (Model.Status == BookingStatus.Cancelled)
                                    {
                                        <div class="alert alert-danger mt-3 mb-0 p-2">
                                            <i class="fas fa-ban me-2"></i>
                                            <strong>Booking Cancelled</strong>
                                            <br />
                                            <span class="small">
                                                @if (Model.CancellationDate.HasValue)
                                                {
                                                    <span>Cancelled on: @Model.CancellationDate.Value.ToString("MMM dd, yyyy HH:mm")</span>
                                                }
                                                
                                                @if (!string.IsNullOrEmpty(Model.CancellationReason))
                                                {
                                                    <br />
                                                    <span>Reason: @Model.CancellationReason</span>
                                                }
                                            </span>
                                        </div>
                                    }
                                </div>
                                
                                <div class="col-md-4 text-md-end">
                                    @if (Model.Status != BookingStatus.Cancelled && 
                                         Model.Status != BookingStatus.CheckedIn && 
                                         Model.Status != BookingStatus.CheckedOut)
                                    {
                                        <div class="btn-group-vertical gap-2">
                                            <a asp-action="Edit" asp-route-id="@Model.BookingId" 
                                               class="btn btn-outline-primary">
                                                <i class="fas fa-edit me-2"></i>Modify Booking
                                            </a>
                                            <button type="button" 
                                                    class="btn btn-outline-danger"
                                                    data-bs-toggle="modal" 
                                                    data-bs-target="#cancelModal">
                                                <i class="fas fa-times me-2"></i>Cancel Booking
                                            </button>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Room Information -->
                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-header bg-info text-white">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-bed me-2"></i>Room Details
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <img src="~/images/rooms/@(Model.Room.RoomType.ToLower()).jpeg" 
                                     alt="@Model.Room.RoomType Room" 
                                     class="img-fluid rounded"
                                     style="height: 200px; width: 100%; object-fit: cover;" />
                            </div>
                            <h6 class="fw-bold">@Model.Room.RoomType</h6>
                            <div class="row">
                                <div class="col-6">
                                    <p class="mb-1"><strong>Room Number:</strong></p>
                                    <p class="mb-1"><strong>Rate per Night:</strong></p>
                                    <p class="mb-1"><strong>Max Occupancy:</strong></p>
                                </div>
                                <div class="col-6">
                                    <p class="mb-1">@Model.Room.RoomNumber</p>
                                    <p class="mb-1">$@Model.Room.PricePerNight.ToString("F2")</p>
                                    <p class="mb-1">@Model.Room.MaxOccupancy guests</p>
                                </div>
                            </div>
                            @if (!string.IsNullOrEmpty(Model.Room.Amenities))
                            {
                                <div class="mt-3">
                                    <strong>Amenities:</strong>
                                    <p class="small text-muted mb-0">@Model.Room.Amenities</p>
                                </div>
                            }
                        </div>
                    </div>
                </div>

                <!-- Stay Information -->
                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-header bg-success text-white">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-calendar-alt me-2"></i>Stay Information
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-6">
                                    <p class="mb-2"><strong>Check-in:</strong></p>
                                    <p class="mb-2"><strong>Check-out:</strong></p>
                                    <p class="mb-2"><strong>Duration:</strong></p>
                                    <p class="mb-2"><strong>Guests:</strong></p>
                                    <p class="mb-2"><strong>Booked on:</strong></p>
                                </div>
                                <div class="col-6">
                                    <p class="mb-2">@Model.CheckInDate.ToString("dddd, MMM dd, yyyy")</p>
                                    <p class="mb-2">@Model.CheckOutDate.ToString("dddd, MMM dd, yyyy")</p>
                                    <p class="mb-2">@((Model.CheckOutDate - Model.CheckInDate).Days) nights</p>
                                    <p class="mb-2">@Model.NumberOfGuests</p>
                                    <p class="mb-2">@Model.BookingDate.ToString("MMM dd, yyyy")</p>
                                </div>
                            </div>
                            
                            @if (!string.IsNullOrEmpty(Model.SpecialRequests))
                            {
                                <div class="mt-3 pt-3 border-top">
                                    <strong>Special Requests:</strong>
                                    <p class="small mb-0">@Model.SpecialRequests</p>
                                </div>
                            }
                        </div>
                    </div>
                </div>

                <!-- Bill Summary -->
                <div class="col-md-6 mb-4">
                    <div class="card">
                        <div class="card-header bg-warning text-dark">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-receipt me-2"></i>Bill Summary
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="d-flex justify-content-between mb-2">
                                <span>Room Rate (per night):</span>
                                <span>$@Model.Room.PricePerNight.ToString("F2")</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Number of Nights:</span>
                                <span>@((Model.CheckOutDate - Model.CheckInDate).Days)</span>
                            </div>
                            <hr />
                            <div class="d-flex justify-content-between">
                                <strong>Total Amount:</strong>
                                <strong class="text-success">$@Model.TotalAmount.ToString("F2")</strong>
                            </div>
                            
                            @if (Model.Status != BookingStatus.Cancelled)
                            {
                                <div class="mt-3 pt-3 border-top">
                                    <div class="d-grid gap-2">
                                        <button onclick="window.print()" class="btn btn-outline-primary btn-sm">
                                            <i class="fas fa-print me-2"></i>Print Receipt
                                        </button>
                                        <a href="mailto:?subject=Booking Confirmation&body=My booking confirmation number is @Model.BookingId" 
                                           class="btn btn-outline-primary btn-sm">
                                            <i class="fas fa-envelope me-2"></i>Email Receipt
                                        </a>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>

                <!-- Customer Information -->
                <div class="col-md-6 mb-4">
                    <div class="card">
                        <div class="card-header bg-secondary text-white">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-user me-2"></i>Guest Information
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-5">
                                    <p class="mb-1"><strong>Name:</strong></p>
                                    <p class="mb-1"><strong>Email:</strong></p>
                                    <p class="mb-1"><strong>Phone:</strong></p>
                                </div>
                                <div class="col-7">
                                    <p class="mb-1">@Model.Customer.FirstName @Model.Customer.LastName</p>
                                    <p class="mb-1">@Model.Customer.Email</p>
                                    <p class="mb-1">@(Model.Customer.PhoneNumber ?? "N/A")</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Important Information -->
            <div class="row">
                <div class="col-12">
                    <div class="card bg-light border-0">
                        <div class="card-body">
                            <h6 class="card-title">
                                <i class="fas fa-info-circle me-2"></i>Important Information
                            </h6>
                            <div class="row">
                                <div class="col-md-6">
                                    <ul class="mb-0">
                                        <li>Check-in time: 3:00 PM</li>
                                        <li>Check-out time: 11:00 AM</li>
                                        <li>Please bring valid photo ID</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul class="mb-0">
                                        <li>Free cancellation up to 24 hours before check-in</li>
                                        <li>Contact us: (555) 123-HOTEL</li>
                                        <li>Email: help@contosohotels.com</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Cancel Modal -->
<div class="modal fade" id="cancelModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Cancel Booking #@Model.BookingId</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form asp-action="Cancel" asp-route-id="@Model.BookingId" method="post">
                <div class="modal-body">
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Are you sure you want to cancel this booking?</strong>
                        <br />This action cannot be undone.
                    </div>
                    
                    @{
                        var hoursUntilCheckIn = (Model.CheckInDate - DateTime.UtcNow).TotalHours;
                    }
                    
                    @if (hoursUntilCheckIn < 24 && hoursUntilCheckIn > 0)
                    {
                        <div class="alert alert-danger">
                            <i class="fas fa-clock me-2"></i>
                            <strong>Late Cancellation Notice:</strong> You are cancelling within 24 hours of check-in. 
                            This may incur cancellation fees.
                        </div>
                    }

                    <div class="mb-3">
                        <label for="cancellationReason" class="form-label">
                            Reason for cancellation (optional)
                        </label>
                        <textarea id="cancellationReason" 
                                  name="cancellationReason" 
                                  class="form-control" 
                                  rows="3" 
                                  placeholder="Please let us know why you're cancelling..."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        Keep Booking
                    </button>
                    <button type="submit" class="btn btn-danger">
                        <i class="fas fa-times me-2"></i>Cancel Booking
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="row">
                <!-- Room Service and Housekeeping Tabs -->
                <div class="col-md-12 mb-4">
                    <div class="card">
                        <div class="card-header bg-primary text-white">
                            <ul class="nav nav-tabs card-header-tabs" id="servicesTabs" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <a class="nav-link active text-dark" id="room-service-tab" data-bs-toggle="tab" href="#room-service" role="tab" aria-controls="room-service" aria-selected="true">
                                        <i class="fas fa-utensils me-2"></i>Room Service
                                    </a>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <a class="nav-link text-dark" id="housekeeping-tab" data-bs-toggle="tab" href="#housekeeping" role="tab" aria-controls="housekeeping" aria-selected="false">
                                        <i class="fas fa-broom me-2"></i>Housekeeping
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <div class="tab-content" id="servicesTabsContent">
                                <!-- Room Service Tab -->
                                <div class="tab-pane fade show active" id="room-service" role="tabpanel" aria-labelledby="room-service-tab">
                                    @{
                                        var roomServices = ViewData["RoomServices"] as List<RoomService>;
                                        var canOrderRoomService = Model.Status == BookingStatus.Confirmed || Model.Status == BookingStatus.CheckedIn;
                                    }

                                    <!-- Room Service Order Form -->
                                    @if (canOrderRoomService)
                                    {
                                        <h5 class="mb-3">Order Room Service</h5>
                                        <form asp-action="OrderRoomService" method="post">
                                            <input type="hidden" name="bookingId" value="@Model.BookingId" />
                                            
                                            <div class="row mb-3">
                                                <div class="col-md-6">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label">Service Type</label>
                                                        <select name="serviceType" class="form-select" id="serviceTypeSelect" required>
                                                            <option value="" selected disabled>Select Service Type</option>
                                                            <option value="@RoomServiceType.Food">Food</option>
                                                            <option value="@RoomServiceType.Beverage">Beverage</option>
                                                            <option value="@RoomServiceType.Amenity">Amenity</option>
                                                            <option value="@RoomServiceType.Other">Other</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label">Item</label>
                                                        <select name="itemName" class="form-select" id="foodItems" style="display: none;">
                                                            <option value="" selected disabled>Select Food Item</option>
                                                            <option value="Club Sandwich" data-price="18.95">Club Sandwich - $18.95</option>
                                                            <option value="Caesar Salad" data-price="15.50">Caesar Salad - $15.50</option>
                                                            <option value="Cheeseburger & Fries" data-price="22.75">Cheeseburger & Fries - $22.75</option>
                                                            <option value="Pasta Carbonara" data-price="19.95">Pasta Carbonara - $19.95</option>
                                                            <option value="Margherita Pizza" data-price="20.50">Margherita Pizza - $20.50</option>
                                                        </select>
                                                        <select name="itemName" class="form-select" id="beverageItems" style="display: none;">
                                                            <option value="" selected disabled>Select Beverage</option>
                                                            <option value="Bottled Water" data-price="4.50">Bottled Water - $4.50</option>
                                                            <option value="Soda" data-price="5.25">Soda - $5.25</option>
                                                            <option value="Coffee" data-price="6.50">Coffee - $6.50</option>
                                                            <option value="Tea" data-price="5.95">Tea - $5.95</option>
                                                            <option value="Fresh Juice" data-price="7.95">Fresh Juice - $7.95</option>
                                                        </select>
                                                        <select name="itemName" class="form-select" id="amenityItems" style="display: none;">
                                                            <option value="" selected disabled>Select Amenity</option>
                                                            <option value="Extra Toiletries" data-price="0">Extra Toiletries - Free</option>
                                                            <option value="Dental Kit" data-price="3.95">Dental Kit - $3.95</option>
                                                            <option value="Shaving Kit" data-price="4.95">Shaving Kit - $4.95</option>
                                                            <option value="Sewing Kit" data-price="2.95">Sewing Kit - $2.95</option>
                                                        </select>
                                                        <input type="text" name="itemName" class="form-control" id="otherItem" style="display: none;" placeholder="Enter custom item">
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="row mb-3">
                                                <div class="col-md-6">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label">Price</label>
                                                        <div class="input-group">
                                                            <span class="input-group-text">$</span>
                                                            <input type="number" name="price" class="form-control" id="priceInput" step="0.01" min="0" required>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label">Special Instructions</label>
                                                        <textarea name="specialInstructions" class="form-control" rows="2" placeholder="Any special instructions for your order"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="text-end">
                                                <button type="submit" class="btn btn-primary">
                                                    <i class="fas fa-utensils me-2"></i>Place Order
                                                </button>
                                            </div>
                                        </form>
                                        <hr class="my-4">
                                    }

                                    <!-- Room Service History -->
                                    <h5 class="mb-3">Room Service History</h5>
                                    @if (roomServices != null && roomServices.Any())
                                    {
                                        <div class="table-responsive">
                                            <table class="table table-striped table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>Item</th>
                                                        <th>Type</th>
                                                        <th>Price</th>
                                                        <th>Status</th>
                                                        <th>Date</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    @foreach (var service in roomServices)
                                                    {
                                                        <tr>
                                                            <td>@service.ItemName</td>
                                                            <td>@service.ServiceType</td>
                                                            <td>$@service.Price.ToString("F2")</td>                                                            <td>
                                                                @{
                                                                    var roomServiceStatusClass = service.Status.ToString() switch
                                                                    {
                                                                        "Requested" => "bg-warning",
                                                                        "InProgress" => "bg-info",
                                                                        "Delivered" => "bg-success",
                                                                        "Cancelled" => "bg-danger",
                                                                        _ => "bg-secondary"
                                                                    };
                                                                }
                                                                <span class="badge @roomServiceStatusClass">@service.Status</span>
                                                            </td>
                                                            <td>@service.RequestDate.ToString("MMM dd, HH:mm")</td>
                                                        </tr>
                                                    }
                                                </tbody>
                                            </table>
                                        </div>
                                    }
                                    else
                                    {
                                        <div class="alert alert-info">
                                            <i class="fas fa-info-circle me-2"></i>No room service orders found for this booking.
                                        </div>
                                    }
                                </div>
                                
                                <!-- Housekeeping Tab -->
                                <div class="tab-pane fade" id="housekeeping" role="tabpanel" aria-labelledby="housekeeping-tab">
                                    @{
                                        var housekeepingRequests = ViewData["HousekeepingRequests"] as List<HousekeepingRequest>;
                                        var canRequestHousekeeping = Model.Status == BookingStatus.Confirmed || Model.Status == BookingStatus.CheckedIn;
                                    }

                                    <!-- Housekeeping Request Form -->
                                    @if (canRequestHousekeeping)
                                    {
                                        <h5 class="mb-3">Request Housekeeping</h5>
                                        <form asp-action="RequestHousekeeping" method="post">
                                            <input type="hidden" name="bookingId" value="@Model.BookingId" />
                                            
                                            <div class="row mb-3">
                                                <div class="col-md-6">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label">Request Type</label>
                                                        <select name="requestType" class="form-select" required>
                                                            <option value="@HousekeepingRequestType.Towels" selected>New Towels</option>
                                                            <option value="@HousekeepingRequestType.Cleaning">Room Cleaning</option>
                                                            <option value="@HousekeepingRequestType.Bedding">Fresh Bedding</option>
                                                            <option value="@HousekeepingRequestType.Toiletries">Toiletries</option>
                                                            <option value="@HousekeepingRequestType.Other">Other</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label">Notes</label>
                                                        <textarea name="notes" class="form-control" rows="2" placeholder="Any specific details for your request"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="text-end">
                                                <button type="submit" class="btn btn-primary">
                                                    <i class="fas fa-broom me-2"></i>Submit Request
                                                </button>
                                            </div>
                                        </form>
                                        <hr class="my-4">
                                    }

                                    <!-- Housekeeping History -->
                                    <h5 class="mb-3">Housekeeping Request History</h5>
                                    @if (housekeepingRequests != null && housekeepingRequests.Any())
                                    {
                                        <div class="table-responsive">
                                            <table class="table table-striped table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>Type</th>
                                                        <th>Status</th>
                                                        <th>Date</th>
                                                        <th>Notes</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    @foreach (var request in housekeepingRequests)
                                                    {
                                                        <tr>
                                                            <td>@request.RequestType</td>                                                            <td>
                                                                @{
                                                                    var housekeepingStatusClass = request.Status.ToString() switch
                                                                    {
                                                                        "Requested" => "bg-warning",
                                                                        "InProgress" => "bg-info",
                                                                        "Completed" => "bg-success",
                                                                        "Cancelled" => "bg-danger",
                                                                        _ => "bg-secondary"
                                                                    };
                                                                }
                                                                <span class="badge @housekeepingStatusClass">@request.Status</span>
                                                            </td>
                                                            <td>@request.RequestDate.ToString("MMM dd, HH:mm")</td>
                                                            <td>@(string.IsNullOrEmpty(request.Notes) ? "-" : request.Notes)</td>
                                                        </tr>
                                                    }
                                                </tbody>
                                            </table>
                                        </div>
                                    }
                                    else
                                    {
                                        <div class="alert alert-info">
                                            <i class="fas fa-info-circle me-2"></i>No housekeeping requests found for this booking.
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Script for dynamic form fields -->
                @section Scripts {
                    <script>
                        document.addEventListener('DOMContentLoaded', function() {
                            const serviceTypeSelect = document.getElementById('serviceTypeSelect');
                            const foodItems = document.getElementById('foodItems');
                            const beverageItems = document.getElementById('beverageItems');
                            const amenityItems = document.getElementById('amenityItems');
                            const otherItem = document.getElementById('otherItem');
                            const priceInput = document.getElementById('priceInput');
                            
                            // Hide all item selectors initially
                            function hideAllSelectors() {
                                foodItems.style.display = 'none';
                                beverageItems.style.display = 'none';
                                amenityItems.style.display = 'none';
                                otherItem.style.display = 'none';
                            }
                            
                            // Update the form based on service type selection
                            serviceTypeSelect.addEventListener('change', function() {
                                hideAllSelectors();
                                priceInput.value = '';
                                
                                switch(this.value) {
                                    case '0': // Food
                                        foodItems.style.display = 'block';
                                        break;
                                    case '1': // Beverage
                                        beverageItems.style.display = 'block';
                                        break;
                                    case '2': // Amenity
                                        amenityItems.style.display = 'block';
                                        break;
                                    case '3': // Other
                                        otherItem.style.display = 'block';
                                        break;
                                }
                            });
                            
                            // Update price when a menu item is selected
                            function setupPriceUpdate(selector) {
                                selector.addEventListener('change', function() {
                                    const selectedOption = this.options[this.selectedIndex];
                                    const price = selectedOption.getAttribute('data-price');
                                    if (price) {
                                        priceInput.value = price;
                                    }
                                });
                            }
                            
                            setupPriceUpdate(foodItems);
                            setupPriceUpdate(beverageItems);
                            setupPriceUpdate(amenityItems);
                        });
                    </script>
                }
